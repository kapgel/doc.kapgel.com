<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Kapgel.github.io : kapgel api docs">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Kapgel.github.io</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kapgel">View on GitHub</a>

          <h1 id="project_title">Kapgel.github.io</h1>
          <h2 id="project_tagline">kapgel api docs</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a name="kapgel-%C4%B0%C5%9F-g%C3%B6nderme-ve-takip-sistemi-api-d%C3%B6k%C3%BCmantasyonu" class="anchor" href="#kapgel-%C4%B0%C5%9F-g%C3%B6nderme-ve-takip-sistemi-api-d%C3%B6k%C3%BCmantasyonu"><span class="octicon octicon-link"></span></a>Kapgel İş Gönderme ve Takip Sistemi API dökümantasyonu</h3>

<p>Kapgel API, kullanıcıların HTTP üzerinden güvenli bir şekide kapgel sistemine programatik olarak erişmesini sağlar. Kapgel API
hem son kullanıcıların yeni gönderi girmeleri için hem de girilmiş olan gönderilerin bir admin tarafından yönetimi için kullanılabilir. Bu sistemden beklenebilecek bazı özellikler şu anda eksik olsada nihai amacımız gönderi yapan bütün şirketlerin kapgel'i sistemlerine sorunsuz ve rahat bir sekilde entegre edebilmelerini sağlamaktır. Eğer bir sorunuz olursa ve ya eklenmesini istediğiniz bir özellik olursa lütfen bizimle irtibata geçin, isteklerinizi bir sonraki versiyonumuzda hayata geçirmeye çalışırız.</p>

<p>Kapgel API'ın son versiyonunun temel URL'i <a href="https://api.kapgel.com/1">https://api.kapgel.com/1</a> dir. HTTP istekleri bu URL'i kullanan adreslere gönderilecektir. Bu dökümantasyondaki diğer bütün adresler bu temel adresin ardına eklenmelidir.</p>

<h3>
<a name="kimlik-do%C4%9Frulama-ve-yetki-anahtar%C4%B1na-ula%C5%9Fma" class="anchor" href="#kimlik-do%C4%9Frulama-ve-yetki-anahtar%C4%B1na-ula%C5%9Fma"><span class="octicon octicon-link"></span></a>Kimlik Doğrulama ve yetki anahtarına ulaşma</h3>

<p>Bu istek sadece bir defa yapılıp yetki anahtarına ulaşmak için kullanılabilir. Yetki anahtarı değişmediği için programınızda her zaman kullanıcı adı ve şifre göndermek yerine, yetki anahtarınızı kaydedip onu bir daha sorgulamamanızı tavsiye ediyoruz.
İstek:</p>

<pre><code>POST /auth
header: {
  "Content-Type": "application/json"
}
body: {
  "username": "osman", 
  "password":"kahramanmaras1978"
}
</code></pre>

<p>Cevap:</p>

<pre><code>{
  result: "0b833ef40-245c-11e4-8b24-05df52b6cb67"
}
</code></pre>

<p>Cevaptaki 'result' öğesi sizin yetki anahtarınızdır.</p>

<h3>
<a name="job-olusturma" class="anchor" href="#job-olusturma"><span class="octicon octicon-link"></span></a>job olusturma:</h3>

<pre><code>POST /job
header: {
  kapgel-auth: 0b833ef40-245c-11e4-8b24-05df52b6cb67
}
body: { 
  "subStore": "53b169b05b4856ab90e05d15",
  "desi": 3,
  "recipients": [{
    "name": "Mehmet Yilmaz",
    "phone": "05321234567",
    "notes": "Merdivenden cikinca 5. katta, zili calmayin"
  }],
  "dropOff": [{
    "number": 21,
    "apartment": 10,
    "state": "Beykoz",
    "street": "Çay Ocağı Sk",
    "city": "İstanbul",
    "country": "Türkiye"
  }]
}
</code></pre>

<p>Cevap:</p>

<pre><code>{
  "count":1,
  "result":{
    "number":1009,
    "tokenSecret":"1758",
    "token":"0W1TY4wW6W",
    "error":"addressError",
    "store":"53b15f7d23603387906b6e8e",
    "subStore":"53b169b05b4856ab90e05d15",
    "desi":3,
    "events":{
      "created":{
        "time":"2014-08-15T12:29:38.049Z"
      }
    },
    "pickUp":[{
      "coordinates":[41.01277,28.889657],
      "address":"Çam Sokak",
      "formattedAddress":"Mehmet Nesih Özmen Mh., Çam Sokak, 34200 Güngören/Istanbul Province, Turkey",
      "postalCode":"34200",
      "state":"Güngören",
      "neighborhood":"Mehmet Nesih Özmen Mh.",
      "number":"12",
      "apartment":"1",
      "street":"Çam Sokak",
      "country":"Turkey",
      "city":"Istanbul",
      "status":"unsure"
    }],
    "dropOff":[{
      "number":"21",
      "apartment":"10",
      "state":"Beykoz",
      "street":"Çay Ocağı Sk",
      "city":"İstanbul",
      "country":"Türkiye",
      "status":"valid"
    }],
    "recipients":[{
      "name":"Mehmet Yilmaz",
      "phone":"+905321234567",
      "notes":"Merdivenden cikinca 5. katta, zili calmayin"
    }],
    "status":"created",
    "action":"put",
    "_id":"53edfd328c28863e01c63d06",
    "updatedAt":"2014-08-15T12:29:38.761Z",
    "createdAt":"2014-08-15T12:29:38.047Z"
  }
}
</code></pre>

<h3>
<a name="listeleme" class="anchor" href="#listeleme"><span class="octicon octicon-link"></span></a>listeleme</h3>

<p>Bütün gönderilerin listesi için</p>

<pre><code>GET /job
header: {
  kapgel-auth: 0b833ef40-245c-11e4-8b24-05df52b6cb67,
  subStore: 53b169b05b4856ab90e05d15
}
</code></pre>

<p>Tek bir gonderi icin:</p>

<pre><code>GET /job/53edfd328c28863e01c63d06
header: {
  kapgel-auth: 0b833ef40-245c-11e4-8b24-05df52b6cb67
}
</code></pre>

<h3>
<a name="job-onaylama" class="anchor" href="#job-onaylama"><span class="octicon octicon-link"></span></a>Job onaylama</h3>

<pre><code>POST /job/53edfd328c28863e01c63d06/approve
header: {
  kapgel-auth: 0b833ef40-245c-11e4-8b24-05df52b6cb67
}
</code></pre>

<h3>
<a name="iptal-etme" class="anchor" href="#iptal-etme"><span class="octicon octicon-link"></span></a>iptal etme</h3>

<pre><code>POST /job/53edfd328c28863e01c63d06/cancel
header: {
  kapgel-auth: 0b833ef40-245c-11e4-8b24-05df52b6cb67
}
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
